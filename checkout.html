<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="checkout.css" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <script src="https://kit.fontawesome.com/61bcea8d0d.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" 
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
    crossorigin="anonymous">
    <title>Zenith Wal-mart</title>
</head>
<body> 
   
<nav class="navbar navbar-expand navbar-light flex-column flex-md-row sticky-top" style="background-color: rgb(23, 23, 90);">
  <a class="navbar-brand" href="index.html">
    <img src="images/plug3.png" id="img" alt="...">
  </a>
  <div class="navbar-nav-scroll">   
    <ul class="navbar-nav bd-navbar-nav flex-row">
    <li class="wrapper">
     <div id="totalCounter">0</div>  
     <img width="24" height="24" id="trolley" src="https://img.icons8.com/material-outlined/24/ffffff/add-shopping-cart.png" alt="add-shopping-cart"/>
     <a id="sub-title" href="checkout.html">Cart</a>
      </li>
      </a>
    </ul>
  </div>
</nav>
 
<div class="container-fluid">
<div id="myModal" class="modal">
  <div class="modal-content">
    <p id="mode">The purchases you made from our store will be delivered to you at your doorstep,<br>be sure to hold your cash.</br></p>
    <button class="modal-button" id="remove" onclick="closeModal()">OK</button>
  </div>
</div>  
   <label class="switch" title="Change theme">
    <input type="checkbox" id="toggleSwitch">
    <span class="slider"></span>
  </label>
 <p id="userGreeting"></p>   
  <div class="container">
        <div class="card-group" id="cardGroup">
        <div class="card" id="tomato">
        <img class="card-img-top" src="images/Tomato.jpg" alt="Card image cap">
        <div class="card-body">
            <h5 class="card-title">fresh Tomato</h5>
            <p class="card-text">₦ 1,200</p>
            <p class="del"><del>₦ 1,275</del></p>
            <p id="price">0</p>
            <a href="#" class="btn" id="clickTomato">
            <img width="24" height="24" id="cart" src="https://img.icons8.com/ios-glyphs/100/000000/filled-trash.png" alt="add-shopping-cart"/>  
                Remove item
            </a>
            <div id="cartCounter" class="cart-counter">0</div> 
        </div>
        </div>
        </div>
        <div class="card-group" id="cardGroup">
        <div class="card" id="pepper">
         <img class="card-img-top" src="images/pepper.jpg" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title">fresh Pepper</h5>
              <p class="card-text">₦ 1,350</p>
              <p class="del"><del>₦ 1,380</del></p>
              <p id="pepperPrice">0</p>
            <a href="#" class="btn" id="clickPepper">
            <img width="24" height="24" id="cartPepper" src="https://img.icons8.com/ios-glyphs/100/000000/filled-trash.png" alt="add-shopping-cart"/>  
                Remove item
            </a>
            <div id="cartCounterPepper" class="cart-counter">0</div> 
        </div>
        </div>
        </div>       
        <div class="card-group" id="cardGroup">
        <div class="card" id="spring">
        <img class="card-img-top" src="images/spring.jpg" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title">Spring Onions</h5>
              <p class="card-text">₦ 2,130</p>
              <p class="del"><del>₦ 2,230</del></p>
              <p id="springPrice">0</p>
            <a href="#" class="btn" id="clickSpring">
            <img width="24" height="24" id="cartSpring" src="https://img.icons8.com/ios-glyphs/100/000000/filled-trash.png" alt="add-shopping-cart"/>  
              Remove item
            </a>
            <div id="cartCounterSpring" class="cart-counter">0</div>   
        </div>
        </div>
        </div>
        <div class="card-group" id="cardGroup">
        <div class="card" id="egg">
        <img class="card-img-top" src="images/egg.jpg" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title">raw Egg</h5>
              <p class="card-text">₦ 1,135</p>
              <p class="del"><del>₦ 1,270</del></p>
              <p id="eggPrice">0</p>
            <a href="#" class="btn" id="clickEgg">
            <img width="24" height="24" id="cartEgg" src="https://img.icons8.com/ios-glyphs/100/000000/filled-trash.png" alt="add-shopping-cart"/>  
                Remove item
            </a>
            <div id="cartCounterEgg" class="cart-counter">0</div>    
        </div>
        </div>
        </div>
        <div class="card-group" id="cardGroup">
        <div class="card" id="beans">
            <img class="card-img-top" src="images/green.jpg" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title">green Beans</h5>
              <p class="card-text">₦ 1,500</p>
              <p class="del"><del>₦ 1,850</del></p>
              <p id="beansPrice">0</p>
              <a href="#" class="btn" id="clickBeans">
              <img width="24" height="24" id="cartBeans" src="https://img.icons8.com/ios-glyphs/100/000000/filled-trash.png" alt="add-shopping-cart"/>  
                Remove item
              </a>
            <div id="cartCounterBeans" class="cart-counter">0</div>   
            </div>
          </div>
        </div>
        <div class="card-group" id="cardGroup">
        <div class="card" id="onion">
        <img class="card-img-top" src="images/onions.jpg" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title">Onions</h5>
              <p class="card-text">₦ 280</p>
              <p class="del"><del>₦ 350</del></p>
              <p id="onionPrice">0</p>
            <a href="#" class="btn" id="clickOnion">
            <img width="24" height="24" id="cartOnion" src="https://img.icons8.com/ios-glyphs/100/000000/filled-trash.png" alt="add-shopping-cart"/>  
              Remove item
            </a>
            <div id="cartCounterOnion" class="cart-counter">0</div>    
        </div>
        </div>
        </div>
          <div class="card" id="about">
            <h5 class="card-title" id="font">cart summary</h5>
            <h5 id="details">Payment is made only with cash</h5>
            <p id="totalCost"></p>
            <div class="checkout-container">
            <a href="#" class="btn" id="press" onclick="openModal()">
              checkout
            <p id="totalCost2"></p>
            </a>
            </div>
        </div>
  <div id="tomatoInfo"></div>
  
  </div>
</div>

<script>

//   //for theme switch
document.addEventListener("DOMContentLoaded", () => {
  const modeSwitch = document.getElementById("toggleSwitch");
  const container = document.querySelector(".container-fluid");
  const card = document.querySelector(".card");
  const cardTitle = document.querySelector(".card-title"); // Select the card title element
  const labels = document.querySelectorAll(".label");
  const containers = document.querySelector(".container")
  const about = document.querySelector("#pepper");
  const checkOut = document.querySelector("#about");
  const thirdCard = document.querySelector("#spring");
  const fourthCard = document.querySelector("#egg");
  const fifthCard = document.querySelector("#beans");
  const sixthCard = document.querySelector("#onion");
  const totalPrice = document.querySelector("#totalCost")

  const setTheme = (darkMode) => {
    const backgroundColor = darkMode ? "#191919" : "#002147";
    const cardBackground = darkMode ? "#000" : "#fff";
    const cardTitleColor = darkMode ? "#fff" : "#000"; // Card title color for dark and light mode
    const labelColor = darkMode ? "#fff" : "#000";
    const finalCost = darkMode ? "#fff" : "#000";
  
    container.classList.toggle("dark-mode", darkMode);
    container.style.backgroundColor = backgroundColor;
    card.style.backgroundColor = cardBackground;
    card.style.boxShadow = "0px 7px 9px 5px #292828fe";
    checkOut.style.backgroundColor = cardBackground;
    checkOut.style.boxShadow = "0px 7px 9px 5px #292828fe";
    totalPrice.style.color = finalCost
    about.style.backgroundColor = cardBackground;
    about.style.boxShadow = "0px 7px 9px 5px #292828fe";
    thirdCard.style.backgroundColor = cardBackground;
    thirdCard.style.boxShadow = "0px 7px 9px 5px #292828fe";
    fourthCard.style.backgroundColor = cardBackground;
    fourthCard.style.boxShadow = "0px 7px 9px 5px #292828fe";
    fifthCard.style.backgroundColor = cardBackground;
    fifthCard.style.boxShadow = "0px 7px 9px 5px #292828fe";
    sixthCard.style.backgroundColor = cardBackground;
    sixthCard.style.boxShadow = "0px 7px 9px 5px #292828fe";
    cardTitle.style.color = cardTitleColor; // Apply the card title color
    containers.classList.toggle("container-mode", darkMode);
    containers.style.backgroundColor = darkMode ? "#000" : "#ffffffc2";

    labels.forEach((label) => {
      label.style.color = labelColor;
    });
    


  };

  const savedTheme = localStorage.getItem("theme");
  if (savedTheme !== null) {
    modeSwitch.checked = savedTheme === "dark";
    setTheme(savedTheme === "dark");
  }

  modeSwitch.addEventListener("change", () => {
    const darkMode = modeSwitch.checked;
    setTheme(darkMode);
    localStorage.setItem("theme", darkMode ? "dark" : "light");
  });
});

 

window.addEventListener("load", function () { 
  var totalCost = localStorage.getItem("totalProductCost");
  if (totalCost) {
    var finalCostElement = document.getElementById("totalCost");
    var finalCostElement2 = document.getElementById("totalCost2");
    finalCostElement.textContent = "Total Cost: ₦ " + parseFloat(totalCost).toLocaleString();
    finalCostElement2.textContent = "(₦ " + parseFloat(totalCost).toLocaleString() + ")";
  } 

});

window.addEventListener("load", function () {
  var cartCounter = document.getElementById("cartCounter");
  var count = localStorage.getItem("tomatoCartCount");
  var loggedInUser = localStorage.getItem("loggedInUser");
  if (count && loggedInUser) {
    cartCounter.innerText = count;
  }

  var ProductCost = document.getElementById("price");
  var totalProductCost = localStorage.getItem("productCostTomato");
  if (totalProductCost && loggedInUser) {
    ProductCost.style.display = "block";
    ProductCost.innerText = totalProductCost;
  }

  var myCartCounter = document.getElementById("cartCounter");
  var myCount = parseInt(cartCounter.innerText);
  var myTomatoProduct = document.getElementById("tomato");

  if (myCount == 0) {
    myTomatoProduct.style.display = "none";
  }

  updateTotalCount();
})


var removeButtonTomato = document.getElementById("clickTomato");
removeButtonTomato.addEventListener("click", function () {
  var tomatoProduct = document.getElementById("tomato");
  var getUserName = localStorage.getItem("loggedInUser");

  if (tomatoProduct && getUserName) {
    // Retrieve the tomato count from localStorage
    var tomatoCount = parseInt(localStorage.getItem("tomatoCartCount"));

    if (tomatoCount > 0) {
      var productCostOnion = parseFloat(localStorage.getItem("productCostOnion").replace(/[^0-9.-]+/g, ""));
      var productCostBeans = parseFloat(localStorage.getItem("productCostBeans").replace(/[^0-9.-]+/g, ""));
      var productCostEgg = parseFloat(localStorage.getItem("productCostEgg").replace(/[^0-9.-]+/g, ""));
      var productCostSpring = parseFloat(localStorage.getItem("productCostSpring").replace(/[^0-9.-]+/g, ""));
      var productCostPepper = parseFloat(localStorage.getItem("productCostPepper").replace(/[^0-9.-]+/g, ""));
      var totalProductCost = parseFloat(localStorage.getItem("totalProductCost").replace(/[^0-9.-]+/g, ""));
      var productCostTomato = parseFloat(localStorage.getItem("productCostTomato").replace(/[^0-9.-]+/g, ""));
      document.getElementById("totalCost").textContent = totalProductCost.toFixed(2);
      document.getElementById("totalCost2").textContent = totalProductCost.toFixed(2);;
      // Add event listener to removeButtonTomato
      var updatedTotal = totalProductCost - productCostTomato;
      document.getElementById("totalCost").textContent = "Total Cost: ₦ " + updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      document.getElementById("totalCost2").textContent = "(₦ " +  updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ")";
      localStorage.setItem("theTotalCost", updatedTotal)
      // Update the total count
      var updatedTotalCount = calculateTotalCount(
        0, // Set tomatoCount to 0
        localStorage.getItem("pepperCartCount"),
        localStorage.getItem("springCartCount"),
        localStorage.getItem("eggCartCount"),
        localStorage.getItem("beansCartCount"),
        localStorage.getItem("onionCartCount")
      );
      document.getElementById("totalCounter").innerText = updatedTotalCount;
      // Redirect to index.html if the totalItemCount is zero
      if (updatedTotalCount === 0) {
        // Wait for 10 seconds and then redirect to index.html
        setTimeout(function () {
          window.location.href = "index.html";
        }, 2000); // 10000 milliseconds = 10 seconds

      }

      // Reset tomato count and cost to 0 in localStorage
      localStorage.setItem("tomatoCartCount", "0");
      localStorage.setItem("productCostTomato", "cost: ₦ 0");
      localStorage.setItem("totalProductCost",
        productCostPepper
        + productCostSpring
        + productCostEgg
        + productCostBeans
        + productCostOnion
        )

      // Hide the tomato product
      tomatoProduct.style.display = "none";
    }
    updateTotalCount()

  } else if (!getUserName) {
    popUp();
  }
});

//pepper starts here
window.addEventListener("load", function () {
  var cartCounter = document.getElementById("cartCounterPepper");
  var count = localStorage.getItem("pepperCartCount");
  var loggedInUser = localStorage.getItem("loggedInUser");
  if (count && loggedInUser) {
    cartCounter.innerText = count;
  }

  var ProductCost = document.getElementById("pepperPrice");
  var totalProductCost = localStorage.getItem("productCostPepper");
  if (totalProductCost && loggedInUser) {
    ProductCost.style.display = "block";
    ProductCost.innerText = totalProductCost;
  }

  var myCartCounter = document.getElementById("cartCounterPepper");
  var myCount = parseInt(cartCounter.innerText);
  var myPepperProduct = document.getElementById("pepper");

  if (myCount == 0) {
    myPepperProduct.style.display = "none";
  }

  updateTotalCount();
})


var removeButtonPepper = document.getElementById("clickPepper");
removeButtonPepper.addEventListener("click", function () {
  var pepperProduct = document.getElementById("pepper");
  var getUserName = localStorage.getItem("loggedInUser");

  if (pepperProduct && getUserName) {
    // Retrieve the pepper count from localStorage
    var pepperCount = parseInt(localStorage.getItem("pepperCartCount"));
    
    if (pepperCount > 0) {
      var productCostOnion = parseFloat(localStorage.getItem("productCostOnion").replace(/[^0-9.-]+/g, ""));
      var productCostBeans = parseFloat(localStorage.getItem("productCostBeans").replace(/[^0-9.-]+/g, ""));
      var productCostEgg = parseFloat(localStorage.getItem("productCostEgg").replace(/[^0-9.-]+/g, ""));
      var productCostSpring = parseFloat(localStorage.getItem("productCostSpring").replace(/[^0-9.-]+/g, ""));
      var productCostTomato = parseFloat(localStorage.getItem("productCostTomato").replace(/[^0-9.-]+/g, ""));
      var totalProductCost = parseFloat(localStorage.getItem("totalProductCost").replace(/[^0-9.-]+/g, ""));
      var productCostPepper = parseFloat(localStorage.getItem("productCostPepper").replace(/[^0-9.-]+/g, ""));
      var updatedTotal = totalProductCost - productCostPepper;
      document.getElementById("totalCost").textContent = "Total Cost: ₦ " + updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      document.getElementById("totalCost2").textContent = "(₦ " +  updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ")";
      localStorage.setItem("theTotalCost", updatedTotal)
      
      // Update the total count
      var updatedTotalCount = calculateTotalCount(
        0, // Set pepperCount to 0
        localStorage.getItem("tomatoCartCount"),
        localStorage.getItem("springCartCount"),
        localStorage.getItem("eggCartCount"),
        localStorage.getItem("beansCartCount"),
        localStorage.getItem("onionCartCount")
      );
      document.getElementById("totalCounter").innerText = updatedTotalCount;
      // Redirect to index.html if the totalItemCount is zero
      if (updatedTotalCount === 0) {
        // Wait for 10 seconds and then redirect to index.html
        setTimeout(function () {
          window.location.href = "index.html";
        }, 2000); // 10000 milliseconds = 10 seconds

      }
      // Reset pepper count and cost to 0 in localStorage
      localStorage.setItem("pepperCartCount", "0");
      localStorage.setItem("productCostPepper", "cost: ₦ 0");
      localStorage.setItem("totalProductCost",
        productCostTomato
        + productCostSpring
        + productCostEgg
        + productCostBeans
        + productCostOnion
        )

      // Hide the pepper product
      pepperProduct.style.display = "none";
    }
    updateTotalCount()
  } else if (!getUserName) {
    popUp();
  }
});

//spring starts here
window.addEventListener("load", function () {
  var cartCounter = document.getElementById("cartCounterSpring");
  var count = localStorage.getItem("springCartCount");
  var loggedInUser = localStorage.getItem("loggedInUser");
  var myContainer = document.getElementById("containerSpring");
  var myContainerFluid = document.getElementById("containerFluidSpring");
  if (count && loggedInUser) {
    cartCounter.innerText = count;
  }

  var ProductCost = document.getElementById("springPrice");
  var totalProductCost = localStorage.getItem("productCostSpring");
  if (totalProductCost && loggedInUser) {
    ProductCost.style.display = "block";
    ProductCost.innerText = totalProductCost;
  }

  var myCartCounter = document.getElementById("cartCounterSpring");
  var myCount = parseInt(cartCounter.innerText);
  var mySpringProduct = document.getElementById("spring");

  if (myCount == 0) {
    mySpringProduct.style.display = "none";
  }

  updateTotalCount();
})


var removeButtonSpring = document.getElementById("clickSpring");
removeButtonSpring.addEventListener("click", function () {
  var springProduct = document.getElementById("spring");
  var getUserName = localStorage.getItem("loggedInUser");

  if (springProduct && getUserName) {
    // Retrieve the pepper count from localStorage
    var springCount = parseInt(localStorage.getItem("springCartCount"));
    
    if (springCount > 0) {
      var productCostOnion = parseFloat(localStorage.getItem("productCostOnion").replace(/[^0-9.-]+/g, ""));
      var productCostBeans = parseFloat(localStorage.getItem("productCostBeans").replace(/[^0-9.-]+/g, ""));
      var productCostEgg = parseFloat(localStorage.getItem("productCostEgg").replace(/[^0-9.-]+/g, ""));
      var productCostSpring = parseFloat(localStorage.getItem("productCostSpring").replace(/[^0-9.-]+/g, ""));
      var productCostTomato = parseFloat(localStorage.getItem("productCostTomato").replace(/[^0-9.-]+/g, ""));
      var totalProductCost = parseFloat(localStorage.getItem("totalProductCost").replace(/[^0-9.-]+/g, ""));
      var productCostPepper = parseFloat(localStorage.getItem("productCostPepper").replace(/[^0-9.-]+/g, ""));
      var updatedTotal = totalProductCost - productCostSpring;
      document.getElementById("totalCost").textContent = "Total Cost: ₦ " + updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      document.getElementById("totalCost2").textContent = "(₦ " +  updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ")";
      localStorage.setItem("theTotalCost", updatedTotal)
      
      // Update the total count
      var updatedTotalCount = calculateTotalCount(
        0, // Set pepperCount to 0
        localStorage.getItem("tomatoCartCount"),
        localStorage.getItem("pepperCartCount"),
        localStorage.getItem("eggCartCount"),
        localStorage.getItem("beansCartCount"),
        localStorage.getItem("onionCartCount")
      );
      document.getElementById("totalCounter").innerText = updatedTotalCount;
      // Redirect to index.html if the totalItemCount is zero
      if (updatedTotalCount === 0) {
        // Wait for 10 seconds and then redirect to index.html
        setTimeout(function () {
          window.location.href = "index.html";
        }, 2000); // 10000 milliseconds = 10 seconds

      }
      // Reset pepper count and cost to 0 in localStorage
      localStorage.setItem("springCartCount", "0");
      localStorage.setItem("productCostSpring", "cost: ₦ 0");
      localStorage.setItem("totalProductCost",
        productCostTomato
        + productCostPepper
        + productCostEgg
        + productCostBeans
        + productCostOnion
        )

      // Hide the pepper product
      springProduct.style.display = "none";
    }
    updateTotalCount()
  } else if (!getUserName) {
    popUp();
  }
});

//egg starts here
window.addEventListener("load", function () {
  var cartCounter = document.getElementById("cartCounterEgg");
  var count = localStorage.getItem("eggCartCount");
  var loggedInUser = localStorage.getItem("loggedInUser");
  if (count && loggedInUser) {
    cartCounter.innerText = count;
  }

  var ProductCost = document.getElementById("eggPrice");
  var totalProductCost = localStorage.getItem("productCostEgg");
  if (totalProductCost && loggedInUser) {
    ProductCost.style.display = "block";
    ProductCost.innerText = totalProductCost;
  }

  var myCartCounter = document.getElementById("cartCounterEgg");
  var myCount = parseInt(cartCounter.innerText);
  var myEggProduct = document.getElementById("egg");

  if (myCount == 0) {
    myEggProduct.style.display = "none";
  }

  updateTotalCount();
})


var removeButtonEgg = document.getElementById("clickEgg");
removeButtonEgg.addEventListener("click", function () {
  var eggProduct = document.getElementById("egg");
  var getUserName = localStorage.getItem("loggedInUser");

  if (eggProduct && getUserName) {
    // Retrieve the pepper count from localStorage
    var eggCount = parseInt(localStorage.getItem("eggCartCount"));
    
    if (eggCount > 0) {
      var productCostOnion = parseFloat(localStorage.getItem("productCostOnion").replace(/[^0-9.-]+/g, ""));
      var productCostBeans = parseFloat(localStorage.getItem("productCostBeans").replace(/[^0-9.-]+/g, ""));
      var productCostEgg = parseFloat(localStorage.getItem("productCostEgg").replace(/[^0-9.-]+/g, ""));
      var productCostSpring = parseFloat(localStorage.getItem("productCostSpring").replace(/[^0-9.-]+/g, ""));
      var productCostTomato = parseFloat(localStorage.getItem("productCostTomato").replace(/[^0-9.-]+/g, ""));
      var totalProductCost = parseFloat(localStorage.getItem("totalProductCost").replace(/[^0-9.-]+/g, ""));
      var productCostPepper = parseFloat(localStorage.getItem("productCostPepper").replace(/[^0-9.-]+/g, ""));
      var updatedTotal = totalProductCost - productCostEgg;
      document.getElementById("totalCost").textContent = "Total Cost: ₦ " + updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      document.getElementById("totalCost2").textContent = "(₦ " +  updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ")";
      localStorage.setItem("theTotalCost", updatedTotal)
      
      // Update the total count
      var updatedTotalCount = calculateTotalCount(
        0, // Set pepperCount to 0
        localStorage.getItem("tomatoCartCount"),
        localStorage.getItem("pepperCartCount"),
        localStorage.getItem("springCartCount"),
        localStorage.getItem("beansCartCount"),
        localStorage.getItem("onionCartCount")
      );
      document.getElementById("totalCounter").innerText = updatedTotalCount;
      // Redirect to index.html if the totalItemCount is zero
      if (updatedTotalCount === 0) {
        // Wait for 10 seconds and then redirect to index.html
        setTimeout(function () {
          window.location.href = "index.html";
        }, 2000); // 10000 milliseconds = 10 seconds
        
      }
      // Reset pepper count and cost to 0 in localStorage
      localStorage.setItem("eggCartCount", "0");
      localStorage.setItem("productCostEgg", "cost: ₦ 0");
      localStorage.setItem("totalProductCost", 
      productCostTomato
      + productCostPepper
      + productCostSpring
      + productCostBeans
      + productCostOnion
      )

      // Hide the pepper product
      eggProduct.style.display = "none";
    }
    updateTotalCount()
  } else if (!getUserName) {
    popUp();
  }
});

//beans starts here
window.addEventListener("load", function () {
  var cartCounter = document.getElementById("cartCounterBeans");
  var count = localStorage.getItem("beansCartCount");
  var loggedInUser = localStorage.getItem("loggedInUser");
  if (count && loggedInUser) {
    cartCounter.innerText = count;
  }

  var ProductCost = document.getElementById("beansPrice");
  var totalProductCost = localStorage.getItem("productCostBeans");
  if (totalProductCost && loggedInUser) {
    ProductCost.style.display = "block";
    ProductCost.innerText = totalProductCost;
  }

  var myCartCounter = document.getElementById("cartCounterBeans");
  var myCount = parseInt(cartCounter.innerText);
  var myBeansProduct = document.getElementById("beans");

  if (myCount == 0) {
    myBeansProduct.style.display = "none";
  }

  updateTotalCount();
})


var removeButtonBeans = document.getElementById("clickBeans");
removeButtonBeans.addEventListener("click", function () {
  var beansProduct = document.getElementById("beans");
  var getUserName = localStorage.getItem("loggedInUser");

  if (beansProduct && getUserName) {
    // Retrieve the pepper count from localStorage
    var beansCount = parseInt(localStorage.getItem("beansCartCount"));
    
    if (beansCount > 0) {
      var productCostOnion = parseFloat(localStorage.getItem("productCostOnion").replace(/[^0-9.-]+/g, ""));
      var productCostBeans = parseFloat(localStorage.getItem("productCostBeans").replace(/[^0-9.-]+/g, ""));
      var productCostEgg = parseFloat(localStorage.getItem("productCostEgg").replace(/[^0-9.-]+/g, ""));
      var productCostSpring = parseFloat(localStorage.getItem("productCostSpring").replace(/[^0-9.-]+/g, ""));
      var productCostTomato = parseFloat(localStorage.getItem("productCostTomato").replace(/[^0-9.-]+/g, ""));
      var totalProductCost = parseFloat(localStorage.getItem("totalProductCost").replace(/[^0-9.-]+/g, ""));
      var productCostPepper = parseFloat(localStorage.getItem("productCostPepper").replace(/[^0-9.-]+/g, ""));
      var updatedTotal = totalProductCost - productCostBeans;
      document.getElementById("totalCost").textContent = "Total Cost: ₦ " + updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      document.getElementById("totalCost2").textContent = "(₦ " +  updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ")";
      localStorage.setItem("theTotalCost", updatedTotal)
      
      // Update the total count
      var updatedTotalCount = calculateTotalCount(
        0, // Set pepperCount to 0
        localStorage.getItem("tomatoCartCount"),
        localStorage.getItem("pepperCartCount"),
        localStorage.getItem("springCartCount"),
        localStorage.getItem("eggCartCount"),
        localStorage.getItem("onionCartCount")
      );
      document.getElementById("totalCounter").innerText = updatedTotalCount;
      // Redirect to index.html if the totalItemCount is zero
      if (updatedTotalCount === 0) {
        // Wait for 10 seconds and then redirect to index.html
        setTimeout(function () {
          window.location.href = "index.html";
        }, 2000); // 10000 milliseconds = 10 seconds

      }
      // Reset pepper count and cost to 0 in localStorage
      localStorage.setItem("beansCartCount", "0");
      localStorage.setItem("productCostBeans", "cost: ₦ 0");
      localStorage.setItem("totalProductCost", 
        productCostTomato
       + productCostPepper
       + productCostSpring
       + productCostEgg
       + productCostOnion
       )

      // Hide the pepper product
      beansProduct.style.display = "none";
    }
    updateTotalCount()
  } else if (!getUserName) {
    popUp();
  }
});

//onion starts here
window.addEventListener("load", function () {
  var cartCounter = document.getElementById("cartCounterOnion");
  var count = localStorage.getItem("onionCartCount");
  var loggedInUser = localStorage.getItem("loggedInUser");
  if (count && loggedInUser) {
    cartCounter.innerText = count;
  }

  var ProductCost = document.getElementById("onionPrice");
  var totalProductCost = localStorage.getItem("productCostOnion");
  if (totalProductCost && loggedInUser) {
    ProductCost.style.display = "block";
    ProductCost.innerText = totalProductCost;
  }

  var myCartCounter = document.getElementById("cartCounterOnion");
  var myCount = parseInt(cartCounter.innerText);
  var myOnionProduct = document.getElementById("onion");

  if (myCount == 0) {
    myOnionProduct.style.display = "none";
  }

  updateTotalCount();
})


var removeButtonOnion = document.getElementById("clickOnion");
removeButtonOnion.addEventListener("click", function () {
  var onionProduct = document.getElementById("onion");
  var getUserName = localStorage.getItem("loggedInUser");

  if (onionProduct && getUserName) {
    // Retrieve the pepper count from localStorage
    var onionCount = parseInt(localStorage.getItem("onionCartCount"));
    
    if (onionCount > 0) {
      var productCostOnion = parseFloat(localStorage.getItem("productCostOnion").replace(/[^0-9.-]+/g, ""));
      var productCostBeans = parseFloat(localStorage.getItem("productCostBeans").replace(/[^0-9.-]+/g, ""));
      var productCostEgg = parseFloat(localStorage.getItem("productCostEgg").replace(/[^0-9.-]+/g, ""));
      var productCostSpring = parseFloat(localStorage.getItem("productCostSpring").replace(/[^0-9.-]+/g, ""));
      var productCostTomato = parseFloat(localStorage.getItem("productCostTomato").replace(/[^0-9.-]+/g, ""));
      var totalProductCost = parseFloat(localStorage.getItem("totalProductCost").replace(/[^0-9.-]+/g, ""));
      var productCostPepper = parseFloat(localStorage.getItem("productCostPepper").replace(/[^0-9.-]+/g, ""));
      var updatedTotal = totalProductCost - productCostOnion;
      document.getElementById("totalCost").textContent = "Total Cost: ₦ " + updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      document.getElementById("totalCost2").textContent = "(₦ " +  updatedTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ")";
      localStorage.setItem("theTotalCost", updatedTotal)
      
      // Update the total count
      var updatedTotalCount = calculateTotalCount(
        0, // Set pepperCount to 0
        localStorage.getItem("tomatoCartCount"),
        localStorage.getItem("pepperCartCount"),
        localStorage.getItem("springCartCount"),
        localStorage.getItem("eggCartCount"),
        localStorage.getItem("beansCartCount")
      );
      document.getElementById("totalCounter").innerText = updatedTotalCount;
      // Redirect to index.html if the totalItemCount is zero
      if (updatedTotalCount === 0) {
        // Wait for 10 seconds and then redirect to index.html
        setTimeout(function () {
          window.location.href = "index.html";
        }, 2000); // 10000 milliseconds = 10 seconds

      }
      // Reset pepper count and cost to 0 in localStorage
      localStorage.setItem("onionCartCount", "0");
      localStorage.setItem("productCostOnion", "cost: ₦ 0");
      localStorage.setItem("totalProductCost", 
        productCostTomato 
      + productCostPepper
      + productCostSpring
      + productCostEgg
      + productCostBeans
      )

      // Hide the pepper product
      onionProduct.style.display = "none";
    }
    updateTotalCount()
  } else if (!getUserName) {
    popUp();
  }
});

function updateTotalCount() {
  var pepperCartCount = localStorage.getItem("pepperCartCount");
  var tomatoCartCount = localStorage.getItem("tomatoCartCount");
  var springCartCount = localStorage.getItem("springCartCount");
  var eggCartCount = localStorage.getItem("eggCartCount");
  var onionCartCount = localStorage.getItem("onionCartCount");
  var beansCartCount = localStorage.getItem("beansCartCount");

  document.getElementById("totalCounter").innerText = calculateTotalCount(
    tomatoCartCount,
    pepperCartCount,
    springCartCount,
    eggCartCount,
    beansCartCount,
    onionCartCount
  );
}

function calculateTotalCount(
  tomatoCount,
  pepperCount,
  springCount,
  onionCount,
  eggCount,
  beansCount
)
  
 {
  tomatoCount = tomatoCount !== null ? parseInt(tomatoCount) : 0;
  pepperCount = pepperCount !== null ? parseInt(pepperCount) : 0;
  springCount = springCount !== null ? parseInt(springCount) : 0;
  onionCount = onionCount !== null ? parseInt(onionCount) : 0;
  eggCount = eggCount !== null ? parseInt(eggCount) : 0;
  beansCount = beansCount !== null ? parseInt(beansCount) : 0;

  // Check if any of the counts are NaN (Not-a-Number) and set them to 0
  tomatoCount = !isNaN(tomatoCount) ? tomatoCount : 0;
  pepperCount = !isNaN(pepperCount) ? pepperCount : 0;
  springCount = !isNaN(springCount) ? springCount : 0;
  onionCount = !isNaN(onionCount) ? onionCount : 0;
  eggCount = !isNaN(eggCount) ? eggCount : 0;
  beansCount = !isNaN(beansCount) ? beansCount : 0;

  return (
    tomatoCount + pepperCount + springCount + beansCount + eggCount + onionCount
  );
}


// Function to reset cart counts and update local storage
function resetCartCountsAndStore() {
// Create and append glitter elements
  for (let i = 0; i < 300; i++) { // Adjust the number of glitter particles as needed
    const glitter = document.createElement("div");
    glitter.classList.add("glitter");
    glitter.style.left = Math.random() * 100 + "vw";
    glitter.style.top = Math.random() * 100 + "vh";
    document.body.appendChild(glitter);

    // Remove glitter element after animation duration
    setTimeout(() => {
      document.body.removeChild(glitter);
    }, 1000);
  }


  var Tomato = document.getElementById("tomato")
  var Pepper = document.getElementById("pepper")
  var Spring = document.getElementById("spring")
  var Egg = document.getElementById("egg")
  var Beans = document.getElementById("beans")
  var Onion = document.getElementById("onion")

  Tomato.style.display = "none"
  Pepper.style.display = "none"
  Spring.style.display = "none"
  Egg.style.display = "none"
  Beans.style.display = "none"
  Onion.style.display = "none"
  // Reset cart counts and product costs to zero
  localStorage.setItem("tomatoCartCount", "0");
  localStorage.setItem("productCostTomato", "cost: ₦ 0");
  localStorage.setItem("pepperCartCount", "0");
  localStorage.setItem("productCostPepper", "cost: ₦ 0");
  localStorage.setItem("springCartCount", "0");
  localStorage.setItem("productCostSpring", "cost: ₦ 0");
  localStorage.setItem("eggCartCount", "0");
  localStorage.setItem("productCostEgg", "cost: ₦ 0");
  localStorage.setItem("beansCartCount", "0");
  localStorage.setItem("productCostBeans", "cost: ₦ 0");
  localStorage.setItem("onionCartCount", "0");
  localStorage.setItem("productCostOnion", "cost: ₦ 0");
  // Add similar lines for other products if needed
  
  // Update the total cost and count
  var updatedTotalCount = calculateTotalCount(
    "0",
    localStorage.getItem("pepperCartCount"),
    localStorage.getItem("tomatoCartCount"),
    localStorage.getItem("onionCartCount"),
    localStorage.getItem("springCartCount"),
    localStorage.getItem("eggCartCount"),
    localStorage.getItem("beansCartCount")
    // Include counts for other products here
  );
  
  localStorage.setItem("totalProductCost", "0");
  localStorage.setItem("theTotalCost", "0");
  
  // Update the UI to reflect the changes
  document.getElementById("cartCounter").innerText = "0";  // Update cart counters
  document.getElementById("cartCounterPepper").innerText = "0";
  document.getElementById("cartCounterSpring").innerText = "0";
  document.getElementById("cartCounterEgg").innerText = "0";
  document.getElementById("cartCounterBeans").innerText = "0";
  document.getElementById("cartCounterOnion").innerText = "0";
  // Update counters for other products
  document.getElementById("totalCounter").innerText = updatedTotalCount;  // Update total counter
  document.getElementById("totalCost").textContent = "Total Cost: ₦ 0";  // Update total cost
  document.getElementById("totalCost2").textContent = "(₦ 0)";

  
}

document.addEventListener("DOMContentLoaded", function () {
var displayButton = document.getElementById("press");
displayButton.addEventListener("click", function () {
  openModal();
});

var removeButton = document.getElementById("remove");
removeButton.addEventListener("click", function () {
  resetCartCountsAndStore();
  closeModal();

  // Wait for 10 seconds and then redirect to index.html
  setTimeout(function () {
    window.location.href = "index.html";
  }, 2000); // 10000 milliseconds = 10 seconds
});
})

function openModal() {
  var modal = document.getElementById("myModal");
  modal.style.display = "block";
}

function closeModal() {
  var modal = document.getElementById("myModal");
  modal.style.display = "none";
}

</script>


<script src="checkout.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" 
integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" 
integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" 
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" 
integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" 
crossorigin="anonymous"></script>
</body>
</html>

